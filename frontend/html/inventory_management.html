<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management System</title>
    <link rel="stylesheet" href="./../assets/css/styles.css">
</head>
<body>
    <div class="sidebar">
        <div class="profile">
            <img src="/frontend/assets/pictures/profilepic.jpg" alt="Company logo">
            <h2>Naida Sma</h2>
            <p>Admin</p>
        </div>
        <ul class="nav-links">
            <li><a href="main_page.html">Dashboard</a></li>
            <li><a href="inventory_management.html">Inventory Management</a></li>
            <li><a href="categories.html">Categories</a></li>
            <li><a href="#services">Suppliers</a></li>
            <li><a href="#portfolio">Reports</a></li>
            <li><a href="#contact">Settings</a></li>
            <li><a href="#contact">Barcode scanning</a></li>

        </ul>
    </div>
    
    <div class="content">
            
        
        <header>
            <h1>Inventory Management</h1>
        </header>
        
        <section class="inventory-section">
            <div class="form-container">
                <h2>Add New Item</h2>
                <form id="addItemForm">
                    <input type="text" id="itemName" placeholder="Item Name" required>
                    <input type="number" id="itemQuantity" placeholder="Quantity" required>
                    <input type="number" id="itemPrice" placeholder="Price" required>
                    <select id="item-category"  required>
                        
                        <!-- Categories will be dynamically inserted here -->
                    </select>
                    <button type="submit">Add Item</button>
                </form>
            </div>
    
            <div class="inventory-list">
                <h2>View Inventory</h2>
                <input type="text" id="search" placeholder="Search items..." onkeyup="filterItems()">
                <table id="inventoryTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Quantity</th>
                            <th>Unit price</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody id="itemTableBody">
                        
                    </tbody>
                </table>
            </div>
        </section>
    </div>
    
    <script >
        const itemTableBody = document.getElementById('itemTableBody');
const addItemForm = document.getElementById('addItemForm');
let items = [];


addItemForm.addEventListener('submit', function(event) {
    event.preventDefault();

    const name = document.getElementById('itemName').value;
    const quantity = document.getElementById('itemQuantity').value;
    const price = document.getElementById('itemPrice').value;

    const newItem = {
        id: items.length + 1,
        name: name,
        quantity: Number(quantity),
        price: Number(price)
    };

    items.push(newItem);
    renderItems();
    addItemForm.reset();
});


function renderItems() {
    itemTableBody.innerHTML = '';
    items.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${item.name}</td>
            <td>${item.quantity}</td>
            <td>$${item.price.toFixed(2)}</td>
            <td>
                <button class="edit" onclick="editItem(${item.id})">Edit</button>
                <button class="delete" onclick="deleteItem(${item.id})">Delete</button>
            </td>
        `;
        itemTableBody.appendChild(row);
    });
}


function filterItems() {
    const searchValue = document.getElementById('search').value.toLowerCase();
    const filteredItems = items.filter(item => item.name.toLowerCase().includes(searchValue));
    
    itemTableBody.innerHTML = '';
    filteredItems.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${item.name}</td>
            <td>${item.quantity}</td>
            <td>$${item.price.toFixed(2)}</td>
            <td>
                <button class="edit" onclick="editItem(${item.id})">Edit</button>
                <button class="delete" onclick="deleteItem(${item.id})">Delete</button>
            </td>
        `;
        itemTableBody.appendChild(row);
    });
}


function editItem(id) {
    const item = items.find(item => item.id === id);
    if (item) {
        document.getElementById('itemName').value = item.name;
        document.getElementById('itemQuantity').value = item.quantity;
        document.getElementById('itemPrice').value = item.price;
        
        
        items = items.filter(item => item.id !== id);
        renderItems();
    }
}


function deleteItem(id) {
    items = items.filter(item => item.id !== id);
    renderItems();
}
document.addEventListener('DOMContentLoaded', function() {
        const itemCategorySelect = document.getElementById('item-category');
    

        
        let categories = JSON.parse(localStorage.getItem('categories')) || [];

       
        function populateCategoryDropdown() {
            itemCategorySelect.innerHTML = '';
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.name;
                option.textContent = category.name;
                itemCategorySelect.appendChild(option);
            });
        }

        populateCategoryDropdown();
    });
    </script>
 </body>
</html>