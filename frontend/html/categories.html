<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventory Management System</title>
    <link rel="stylesheet" href="./../assets/css/styles.css">
    
</head>
<body>
    <div class="sidebar">
        <div class="profile">
            <img src="/frontend/html/pictures/asv_logo.png" alt="Company logo">
            <h2>Naida Sma</h2>
            <p>Admin</p>
        </div>
        <ul class="nav-links">
            <li><a href="main_page.html">Dashboard</a></li>
            <li><a href="inventory_management.html">Inventory Management</a></li>
            <li><a href="categories.html">Categories</a></li>
            <li><a href="#services">Suppliers</a></li>
            <li><a href="reports.html">Reports</a></li>
            <li><a href="#contact">Settings</a></li>
            <li><a href="#contact">Barcode scanning</a></li>

        </ul>
    </div>
    
    <div class="content">
        <header>
            <h1>Manage Categories</h1>
        </header>
    
        <section class="category-management">
            <div class="add-category">
                <h2>Add New Category</h2>
                <form id="category-form">
                    <input type="text" id="category-name" placeholder="Category Name" required>
                    <button id="add-category-button" type="submit">Add Category</button>
                </form>
            </div>
    
            <div class="categories-list">
                <h2>Existing Categories</h2>
                <ul id="categories">
                    <!-- Categories will be dynamically inserted here -->
                </ul>
            </div>
        </section>
    </div>
    
    <script >
       function addCategory() {
    const categoryName = document.getElementById("category-name").value;

    $.ajax({
        url: '../../rest/categories', 
        method: 'POST',
        contentType: 'application/json',
        data: JSON.stringify({ categoryName: categoryName }),
        success: function(response) {
            
            alert('Category added successfully!');
            getCategories(); 
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(jqXHR);
            console.log(textStatus);
            console.log(errorThrown);
            alert("There was an error adding the category. Please try again later.");
        }
    });
}
document.getElementById("add-category-button").addEventListener("click", addCategory);


function getCategories() {
    $.ajax({
        url: '../../rest/categories', 
        method: 'GET',
        success: function(data) {
            let output = '<option selected>Please select a category</option>';
            
            data.forEach(category => {
                output += '<option value="' + category.categoryID + '">' + category.categoryName + '</option>';
            });

            const categorySelect = document.getElementById("categories-list");
            categorySelect.innerHTML = output;

        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(jqXHR);
            console.log(textStatus);
            console.log(errorThrown);
            $("#portfolioItems").html("<p>There was an error loading the data. Please try again later.</p>");
        }
    });
}
getCategories();

    </script>
        
       
    </div>
    
    
 </body>
</html>